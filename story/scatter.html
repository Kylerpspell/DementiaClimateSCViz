<html>
  <head>
    <meta charset="utf-8">
    <title>Dementia Climate Relationships</title>
		<link rel="stylesheet" href="./scatter.css">

		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.9.1/d3.min.js"></script>
    </head>
    <body>
			<!-- Nav bar section-->
			<div class="navbar">
				<ul id="navlist">
					<li>
						<a href="../index.html">Home</a>
					</li>
					<li>
						<a href="../visualizations.html">Visualizations</a>
					</li>
					<li>
						<a href="../data.html">Data</a>
					</li>
					<li>
						<a href="../about.html">About</a>
					</li>
				</ul>
			</div>
			<!-- End of nav bar section -->
			<div class="wrapper">
				<h1> Temperature, Humidity, and Dementia Type </h1>
				<div id="inner">

				<div class="legend"></div>
				<div class="scatterDiv"></div>
				<div>
					
					<ul style="list-style-type: none;">
						<li class="horizontalList">
							<input type="checkbox" name="dementia" value="1" checked> Show Alzheimers </input>
						</li>
						<li class="horizontalList">
							<input type="checkbox" name="dementia" value="2" checked> Show Vascular Dementia </input>
						</li>
						<li class="horizontalList">
							<input type="checkbox" name="dementia" value="3" checked> Show Mixed </input>
						</li>
						<li class="horizontalList">
							<input type="checkbox" name="dementia" value="4" checked> Show Other </input>
						</li>
					</ul>
				</div>
				</div>
				<script>
					var margin = { top: 20, right: 0, bottom: 30, left: 60 };
					var width = 900 - margin.left - margin.right;
					var height = 700 - margin.top - margin.bottom;
					
					var x = d3.scaleLinear()
							.domain([68, 77])
							.range([margin.left, width+margin.left]);
						
						var y = d3.scaleLinear()
							.domain([44, 63])
							.range([height+margin.top, margin.top]);

						var xAxis = d3.axisBottom()
							.scale(x)
							.ticks(5);

						// Add percentage markers to y axis
						var yAxis = d3.axisLeft()
							.scale(y)
							.ticks(5)
							.tickFormat(function(d) {
								return d + "%";
							});
						
						var svg = d3.select(".scatterDiv")
							.append("svg")
							.attr("width", width + margin.left + margin.right)
							.attr("height", height + margin.top + margin.bottom);

						svg.append("g")
							.attr("transform", "translate(0," + (height + margin.top) + ")")
							.call(xAxis);
						
						svg.append("g")
							.attr("transform", "translate("+(margin.left)+",0)")
							.call(yAxis);

						//add labels
						svg.append("g")
							.append("text")
							.attr("x", width/2)
							.attr("y", height + margin.top + 30)
							.text("Average High Temperature (F)");
						
						svg.append("g")
							.append("text")
							.attr("transform", "rotate(-90)")
							.attr("x", (-height/2))
							.attr("y", margin.left - 40)
							.text("Average High Humidity (%)");
						
						var legend = d3.select(".scatterDiv")
							.append("svg")
							.attr("width", 200)
							.attr("height", 200);

						legend.append("circle")
							.attr("cx", 10)
							.attr("cy", 10)
							.attr("r", 5)
							.attr("fill", "red")
							.attr("stroke", "black");

						legend.append("text")
							.attr("x", 20)
							.attr("y", 15)
							.text("Alzheimers");
						
						legend.append("circle")
							.attr("cx", 10)
							.attr("cy", 30)
							.attr("r", 5)
							.attr("fill", "blue")
							.attr("stroke", "black");

						legend.append("text")
							.attr("x", 20)
							.attr("y", 35)
							.text("Vascular Dementia");
						
						legend.append("circle")
							.attr("cx", 10)
							.attr("cy", 50)
							.attr("r", 5)
							.attr("fill", "green")
							.attr("stroke", "black");

						legend.append("text")
							.attr("x", 20)
							.attr("y", 55)
							.text("Mixed");
						
						legend.append("circle")
							.attr("cx", 10)
							.attr("cy", 70)
							.attr("r", 5)
							.attr("fill", "yellow")
							.attr("stroke", "black");

						legend.append("text")
							.attr("x", 20)
							.attr("y", 75)
							.text("Other");

						// make all the text and axis white
						d3.selectAll("text")
							.attr("fill", "white");
						d3.selectAll("path")
							.attr("stroke", "white");
						d3.selectAll("line")
							.attr("stroke", "white");
					
					// create x and y coordinates for mouse position
					var xCoord = function(d) {
						return x(d.highTemp);
					};

					var yCoord = function(d) {
						return y(d.highHumidity);
					};

					// create tooltip
					var tooltip = d3.select("body")
						.append("div")
						.attr("class", "tooltip")
						.style("opacity", 0);

					// create tooltip mouseover event handler
					var tipMouseover = function(d) {
						var html = d.city + "<br/>" + 
							"High Temp: " + d.avgHigh + "<br/>" + 
							"High Humidity: " + d.avgRHHigh;
						
						tooltip.html(html)
					};

					// create tooltip mouseout event handler
					var tipMouseout = function(d) {
						tooltip.transition()
							.duration(300)
							.style("opacity", 0);
					};

					// create tooltip mousemove event handler
					var tipMousemove = function(d) {
						tooltip.style("left", (d3.event.pageX + 15) + "px")
							.style("top", (d3.event.pageY - 28) + "px");
					};



					var drawCircles = function() {
						d3.selectAll("circle").remove();

						legend.append("circle")
							.attr("cx", 10)
							.attr("cy", 10)
							.attr("r", 5)
							.attr("fill", "red")
							.attr("stroke", "black");

						legend.append("circle")
							.attr("cx", 10)
							.attr("cy", 30)
							.attr("r", 5)
							.attr("fill", "blue")
							.attr("stroke", "black");
						
						legend.append("circle")
							.attr("cx", 10)
							.attr("cy", 50)
							.attr("r", 5)
							.attr("fill", "green")
							.attr("stroke", "black");
						
						legend.append("circle")
							.attr("cx", 10)
							.attr("cy", 70)
							.attr("r", 5)
							.attr("fill", "yellow")
							.attr("stroke", "black");

						d3.csv("../data/scatterReduced.csv", function(data) {
							svg.selectAll()
								.data(data)
								.enter()
								.append("circle")
								.attr("r", 5)
								.attr("fill", function(d) {
									if (d.DEMENTIA == "1") {
										if (d3.select("input[value='1']").property("checked")) {
											return "red";
										} else {
											return "none";
										}
									} else if (d.DEMENTIA == "2") {
										if (d3.select("input[value='2']").property("checked")) {
											return "blue";
										} else {
											return "none";
										}
									} else if (d.DEMENTIA == "3") {
										if (d3.select("input[value='3']").property("checked")) {
											return "green";
										} else {
											return "none";
										}
									} else if (d.DEMENTIA == "4") {
										if (d3.select("input[value='4']").property("checked")) {
											return "yellow";
										} else {
											return "none";
										}
									} else {
										return "none";
									}
								})
								.attr("stroke", function(d) {
									if (d.DEMENTIA == "1") {
										if (d3.select("input[value='1']").property("checked")) {
											return "black";
										} else {
											return "none";
										}
									} else if (d.DEMENTIA == "2") {
										if (d3.select("input[value='2']").property("checked")) {
											return "black";
										} else {
											return "none";
										}
									} else if (d.DEMENTIA == "3") {
										if (d3.select("input[value='3']").property("checked")) {
											return "black";
										} else {
											return "none";
										}
									} else if (d.DEMENTIA == "4") {
										if (d3.select("input[value='4']").property("checked")) {
											return "black";
										} else {
											return "none";
										}
									} else {
										return "none";
									}
								})
								.attr("cx", function(d) {
									return x(+d.avgHigh);
								})
								.attr("cy", function(d) {
									return y(+d.avgRHHigh);
								})
								.attr("id", function(d,i) {
									return "circle " + i;
								})
								.on("mouseover", function(d) {
									d3.select(this)
										.attr("r", 8);
								})
								.on("mouseout", function(d) {
									d3.select(this)
										.attr("r", 5);
								})
								.append("title")
								.text(function(d) {
									return "Temp: " + Math.round(+d.avgHigh*100)/100 + "F\nRelative Humidity: " + Math.round(+d.avgRHHigh*100)/100 + "%";
								});
						});
					};
					drawCircles();
					// remove the loading message
					d3.selectAll("input").on("change", drawCircles);
				</script>
	Whats the difference between the different types of dementia?
	<br/>
	<a href="https://www.medicalnewstoday.com/articles/vascular-dementia-vs-alzheimers#summary">Click here to read more</a>
	<div class="story">
		Now lets look at how these datapoints are distributed across the state, starting with the cases of dementia.
		<button onClick="window.location.href='map_dementia.html'">Next</button>
	</div>

	</body>
</html>